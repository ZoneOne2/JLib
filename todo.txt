Transfer appropriate functions over from IFP

fix buttons using better constructor technique

Add left/right/middle buttons to mousepress in JLib template
Add modes to JLib template

re-fix all code folding. (remove spaces)